<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Interaktif - Pendidikan Pancasila Fase E</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Harmony -->
    <!-- Application Structure Plan: Mengubah arsitektur multi-halaman menjadi SPA (Single Page Application) untuk alur belajar yang berkelanjutan. Navigasi sticky di bagian atas memungkinkan pengguna untuk melompat ke setiap pilar materi (Pancasila, UUD 1945, Bhinneka Tunggal Ika, NKRI) dan bagian evaluasi akhir. Setiap bagian materi diperkaya dengan "Pertanyaan Pemantik" untuk merangsang pemikiran kritis dan "Evaluasi Modul" untuk refleksi. Diakhiri dengan "Evaluasi Global" dan "Kesimpulan" untuk mengukur pemahaman secara keseluruhan dan merangkum pembelajaran. Struktur ini dipilih untuk menciptakan pengalaman belajar yang terstruktur, mendalam, dan terintegrasi dalam satu halaman. -->
    <!-- Visualization & Content Choices: Menggunakan kombinasi tab, akordeon, dan kartu interaktif untuk menyajikan konten yang diperluas agar tidak membanjiri pengguna. Pertanyaan disajikan dalam blok yang dirancang khusus untuk membedakannya dari konten utama. Evaluasi Global menggunakan kuis interaktif berbasis JavaScript untuk memberikan umpan balik langsung. Pilihan ini bertujuan untuk menjaga keterlibatan pengguna dan memfasilitasi penyerapan informasi yang kompleks secara bertahap. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #4B4B4B;
        }
        .hero-bg {
            background-color: #FFECD1;
            background-image:
                radial-gradient(at 47% 33%, hsl(28.63, 100%, 84%) 0, transparent 59%),
                radial-gradient(at 82% 65%, hsl(192.00, 72%, 75%) 0, transparent 55%);
        }
        .nav-link.active {
            color: #F97316;
            font-weight: 700;
        }
        .accordion-item-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            padding: 0 1.5rem;
        }
        .accordion-item.active .accordion-item-body {
            max-height: 1000px; /* Increased max-height */
            padding: 1.5rem;
        }
        .accordion-item.active .accordion-icon {
            transform: rotate(180deg);
        }
        .accordion-icon {
            transition: transform 0.3s ease;
        }
        .tab-button.active {
            border-color: #F97316;
            background-color: #FFF7ED;
            color: #F97316;
        }
        .quiz-option.selected {
            background-color: #FDBA74; /* orange-300 */
            border-color: #F97316; /* orange-500 */
        }
        .quiz-option.correct {
            background-color: #BBF7D0; /* green-200 */
            border-color: #22C55E; /* green-500 */
        }
        .quiz-option.incorrect {
            background-color: #FECACA; /* red-200 */
            border-color: #EF4444; /* red-500 */
        }
        .gemini-response-container {
            border-left: 3px solid #F97316;
            background-color: #FFF7ED;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0 8px 8px 0;
        }
        .loader {
            width: 24px;
            height: 24px;
            border: 3px solid #FDBA74;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }
        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased">
    <div id="root" class="flex flex-col min-h-screen">
        <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50">
            <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <img src="../../images/logo.png" alt="Logo" class="h-10 w-10 object-contain" onerror="this.src='https://placehold.co/40x40/FFECB3/4B4B4B?text=Logo'; this.onerror=null;">
                    <h1 class="text-xl font-bold text-gray-800 hidden md:block">Pendidikan Pancasila</h1>
                </div>
                <div class="hidden md:flex items-center space-x-6 text-gray-600 font-semibold">
                    <a href="#pancasila" class="nav-link hover:text-orange-500 transition-colors">Pancasila</a>
                    <a href="#uud1945" class="nav-link hover:text-orange-500 transition-colors">UUD 1945</a>
                    <a href="#bhinneka" class="nav-link hover:text-orange-500 transition-colors">Bhinneka T.I.</a>
                    <a href="#nkri" class="nav-link hover:text-orange-500 transition-colors">NKRI</a>
                    <a href="#evaluasi" class="nav-link hover:text-orange-500 transition-colors">Evaluasi</a>
                </div>
                 <a href="#root" class="bg-orange-500 text-white font-semibold py-2 px-4 rounded-lg inline-flex items-center space-x-2 hover:bg-orange-600 transition-colors shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" /></svg>
                    <span>Beranda</span>
                </a>
            </nav>
        </header>

        <main class="flex-grow">
            <!-- Hero Section -->
            <section class="hero-bg py-20 md:py-28">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">Media Pembelajaran Interaktif</h2>
                    <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">Selamat datang! Mari jelajahi empat pilar kebangsaan untuk membentuk warga negara Indonesia yang cerdas dan berkarakter Pancasila.</p>
                </div>
            </section>
            
            <!-- Modul 1: Pancasila -->
            <section id="pancasila" class="py-16 md:py-24 bg-stone-50">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-12">
                         <h3 class="text-3xl font-bold text-gray-800">Pilar 1: Pancasila</h3>
                         <p class="text-gray-600 mt-2">Dasar Negara, Pandangan Hidup, dan Ideologi Bangsa.</p>
                    </div>

                    <!-- Pertanyaan Pemantik -->
                    <div class="max-w-3xl mx-auto bg-amber-100 border-l-4 border-amber-500 text-amber-800 p-6 rounded-r-lg shadow-md mb-12">
                        <h4 class="text-xl font-bold mb-2">Pertanyaan Pemantik</h4>
                        <p>Mengapa sebuah negara yang besar dan beragam seperti Indonesia memerlukan sebuah dasar negara yang kokoh seperti Pancasila? Apa yang akan terjadi jika kita tidak memilikinya?</p>
                    </div>

                    <!-- Konten Materi Pancasila -->
                    <div class="max-w-4xl mx-auto bg-white p-8 rounded-2xl shadow-lg">
                        <h4 class="text-2xl font-bold text-gray-800 mb-6">A. Sejarah Perumusan Pancasila</h4>
                        <p class="text-gray-700 mb-6">Pancasila lahir dari proses perenungan mendalam para pendiri bangsa dalam sidang Badan Penyelidik Usaha-usaha Persiapan Kemerdekaan Indonesia (BPUPKI). Tiga tokoh utama menyampaikan gagasan mereka:</p>
                        <!-- Tabs Gagasan Pendiri Bangsa -->
                        <div id="tabs-container-pancasila" class="flex justify-center border-b-2 border-gray-200 mb-6 space-x-2 md:space-x-4">
                            <button data-tab="yamin" class="tab-button text-sm md:text-base font-semibold py-3 px-4 border-b-4 border-transparent transition-colors active">Moh. Yamin</button>
                            <button data-tab="soepomo" class="tab-button text-sm md:text-base font-semibold py-3 px-4 border-b-4 border-transparent transition-colors">Dr. Soepomo</button>
                            <button data-tab="soekarno" class="tab-button text-sm md:text-base font-semibold py-3 px-4 border-b-4 border-transparent transition-colors">Ir. Soekarno</button>
                        </div>
                        <div id="tabs-content-pancasila" class="p-4 bg-gray-50 rounded-xl">
                            <div id="yamin" class="tab-pane active">
                                <p class="text-gray-700">Pada 29 Mei 1945, Mohammad Yamin mengusulkan lima asas: Peri Kebangsaan, Peri Kemanusiaan, Peri Ketuhanan, Peri Kerakyatan, dan Kesejahteraan Rakyat. Gagasannya menekankan bahwa dasar negara harus digali dari sejarah dan peradaban luhur bangsa Indonesia.</p>
                            </div>
                            <div id="soepomo" class="tab-pane hidden">
                                <p class="text-gray-700">Pada 31 Mei 1945, Dr. Soepomo memperkenalkan konsep negara integralistik atau negara persatuan. Konsep ini menolak individualisme dan memandang negara sebagai satu kesatuan organik antara pemerintah dan rakyatnya, berdasarkan semangat kekeluargaan.</p>
                            </div>
                            <div id="soekarno" class="tab-pane hidden">
                                <p class="text-gray-700">Pada 1 Juni 1945, Ir. Soekarno menyampaikan pidato monumental yang pertama kali mengusulkan nama "Pancasila" untuk dasar negara. Lima prinsipnya adalah: Kebangsaan Indonesia, Internasionalisme (Perikemanusiaan), Mufakat (Demokrasi), Kesejahteraan Sosial, dan Ketuhanan YME. Hari ini diperingati sebagai Hari Lahir Pancasila.</p>
                            </div>
                        </div>

                        <h4 class="text-2xl font-bold text-gray-800 mt-10 mb-6">B. Kedudukan dan Fungsi Pancasila</h4>
                        <div class="space-y-4">
                            <!-- Accordion Fungsi Pancasila -->
                            <div class="accordion-item border border-gray-200 rounded-lg">
                                <div class="accordion-item-header p-4 flex justify-between items-center bg-gray-50">
                                    <span class="font-semibold text-gray-700">Pancasila sebagai Dasar Negara</span>
                                    <div class="accordion-icon"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div>
                                </div>
                                <div class="accordion-item-body bg-white">
                                    <p class="text-gray-600">Artinya Pancasila menjadi fondasi dan sumber dari segala sumber hukum dalam penyelenggaraan negara. Semua peraturan dan kebijakan harus bersumber dan tidak boleh bertentangan dengan nilai-nilai Pancasila.</p>
                                </div>
                            </div>
                            <div class="accordion-item border border-gray-200 rounded-lg">
                                <div class="accordion-item-header p-4 flex justify-between items-center bg-gray-50">
                                    <span class="font-semibold text-gray-700">Pancasila sebagai Pandangan Hidup Bangsa</span>
                                    <div class="accordion-icon"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div>
                                </div>
                                <div class="accordion-item-body bg-white">
                                    <p class="text-gray-600">Pancasila berfungsi sebagai petunjuk arah (way of life) dalam kehidupan sehari-hari masyarakat Indonesia. Nilai-nilainya menjadi kristalisasi dari pengalaman hidup bangsa yang membentuk sikap, watak, dan perilaku manusia Indonesia.</p>
                                </div>
                            </div>
                             <div class="accordion-item border border-gray-200 rounded-lg">
                                <div class="accordion-item-header p-4 flex justify-between items-center bg-gray-50">
                                    <span class="font-semibold text-gray-700">Pancasila sebagai Ideologi Negara</span>
                                    <div class="accordion-icon"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div>
                                </div>
                                <div class="accordion-item-body bg-white">
                                    <p class="text-gray-600">Sebagai ideologi, Pancasila adalah sistem gagasan dan cita-cita yang ingin diwujudkan oleh bangsa Indonesia. Pancasila merupakan ideologi terbuka yang mampu beradaptasi dengan perkembangan zaman tanpa kehilangan nilai dasarnya.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Evaluasi Modul -->
                     <div class="max-w-3xl mx-auto bg-white border-t-4 border-orange-500 p-6 shadow-lg mt-12 rounded-b-lg">
                        <h4 class="text-xl font-bold text-gray-800 mb-2">Evaluasi Modul 1</h4>
                        <p class="text-gray-600 mb-4">Setelah mempelajari materi, coba jelaskan dengan bahasamu sendiri, apa perbedaan mendasar antara Pancasila sebagai dasar negara dan Pancasila sebagai pandangan hidup bangsa?</p>
                        <button id="gemini-pancasila-btn" class="gemini-btn bg-orange-500 text-white font-semibold py-2 px-4 rounded-lg inline-flex items-center space-x-2 hover:bg-orange-600 transition-colors">
                            <span>✨ Minta Analisis Konsep AI</span>
                        </button>
                        <div id="gemini-pancasila-response" class="mt-4"></div>
                    </div>
                </div>
            </section>

            <!-- Modul 2: UUD 1945 -->
            <section id="uud1945" class="py-16 md:py-24">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-12">
                         <h3 class="text-3xl font-bold text-gray-800">Pilar 2: UUD NRI Tahun 1945</h3>
                         <p class="text-gray-600 mt-2">Konstitusi dan Tata Urutan Perundang-undangan.</p>
                    </div>

                    <!-- Pertanyaan Pemantik -->
                    <div class="max-w-3xl mx-auto bg-sky-100 border-l-4 border-sky-500 text-sky-800 p-6 rounded-r-lg shadow-md mb-12">
                        <h4 class="text-xl font-bold mb-2">Pertanyaan Pemantik</h4>
                        <p>Bayangkan jika di jalan raya tidak ada lampu lalu lintas atau rambu-rambu. Apa yang akan terjadi? Seperti itulah fungsi peraturan perundang-undangan dalam sebuah negara. Mengapa penting bagi kita untuk memiliki hierarki atau tingkatan dalam peraturan tersebut?</p>
                    </div>
                     
                    <!-- Konten Materi UUD 1945 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
                        <div class="bg-white p-8 rounded-2xl shadow-lg">
                            <h4 class="text-2xl font-bold text-gray-800 mb-6">A. Tata Urutan Perundang-undangan</h4>
                            <p class="text-gray-600 mb-6">Menurut UU No. 12 Tahun 2011, hierarki peraturan di Indonesia adalah sebagai berikut, di mana peraturan yang lebih rendah tidak boleh bertentangan dengan yang lebih tinggi (<span class="italic">lex superior derogat legi inferiori</span>).</p>
                            <ol class="list-decimal list-inside space-y-3 text-gray-700 font-semibold">
                                <li>UUD NRI Tahun 1945</li>
                                <li>Ketetapan MPR (TAP MPR)</li>
                                <li>Undang-Undang (UU) / Peraturan Pemerintah Pengganti UU (Perppu)</li>
                                <li>Peraturan Pemerintah (PP)</li>
                                <li>Peraturan Presiden (Perpres)</li>
                                <li>Peraturan Daerah (Perda) Provinsi</li>
                                <li>Peraturan Daerah (Perda) Kabupaten/Kota</li>
                            </ol>
                        </div>
                        <div class="bg-white p-8 rounded-2xl shadow-lg">
                             <h4 class="text-2xl font-bold text-gray-800 mb-6">B. Pancasila sebagai Sumber Hukum</h4>
                             <p class="text-gray-700 mb-4">Pancasila berkedudukan sebagai <span class="font-bold">sumber dari segala sumber hukum negara</span>. Ini berarti:</p>
                             <ul class="list-disc list-inside space-y-2 text-gray-600">
                                 <li>Menjadi landasan filosofis bagi pembentukan hukum.</li>
                                 <li>Semua materi muatan peraturan harus selaras dengan nilai-nilai Pancasila.</li>
                                 <li>Pancasila adalah norma dasar negara (<span class="italic">Staatsfundamentalnorm</span>) yang tidak dapat diubah.</li>
                                 <li>Menjadi acuan dalam pengujian konstitusionalitas sebuah undang-undang oleh Mahkamah Konstitusi.</li>
                             </ul>
                        </div>
                    </div>

                    <!-- Evaluasi Modul -->
                     <div class="max-w-3xl mx-auto bg-white border-t-4 border-sky-500 p-6 shadow-lg mt-12 rounded-b-lg">
                        <h4 class="text-xl font-bold text-gray-800 mb-2">Evaluasi Modul 2</h4>
                        <p class="text-gray-600 mb-4">Jika sebuah Peraturan Daerah (Perda) isinya bertentangan dengan sebuah Undang-Undang (UU), peraturan manakah yang harus diikuti? Jelaskan alasanmu berdasarkan prinsip hierarki perundang-undangan!</p>
                        <button class="gemini-btn bg-sky-500 text-white font-semibold py-2 px-4 rounded-lg inline-flex items-center space-x-2 hover:bg-sky-600 transition-colors" data-prompt="Jelaskan secara sederhana dengan studi kasus mengapa Perda tidak boleh bertentangan dengan UU, berdasarkan prinsip hierarki hukum di Indonesia.">
                            <span>✨ Beri Contoh Studi Kasus AI</span>
                        </button>
                        <div class="gemini-response-uud1945 mt-4"></div>
                    </div>
                </div>
            </section>

             <!-- Modul 3: Bhinneka Tunggal Ika -->
            <section id="bhinneka" class="py-16 md:py-24 bg-stone-50">
                 <div class="container mx-auto px-6">
                    <div class="text-center mb-12">
                         <h3 class="text-3xl font-bold text-gray-800">Pilar 3: Bhinneka Tunggal Ika</h3>
                         <p class="text-gray-600 mt-2">Merajut Persatuan dalam Keberagaman.</p>
                    </div>

                    <!-- Pertanyaan Pemantik -->
                    <div class="max-w-3xl mx-auto bg-emerald-100 border-l-4 border-emerald-500 text-emerald-800 p-6 rounded-r-lg shadow-md mb-12">
                        <h4 class="text-xl font-bold mb-2">Pertanyaan Pemantik</h4>
                        <p>Sebuah sapu lidi akan mudah patah jika hanya sebatang, namun menjadi sangat kuat jika diikat menjadi satu. Bagaimana filosofi ini relevan dengan semboyan Bhinneka Tunggal Ika dalam kehidupan berbangsa kita?</p>
                    </div>
                    
                    <!-- Konten Materi Bhinneka -->
                    <div class="grid md:grid-cols-2 gap-12 items-center">
                        <div class="">
                            <h4 class="text-2xl font-bold text-gray-800 mb-4">A. Keberagaman sebagai Modal Sosial</h4>
                            <p class="text-gray-600 mb-6">Bhinneka Tunggal Ika, yang berarti "Berbeda-beda tetapi tetap satu", adalah pengakuan bahwa keberagaman suku, agama, ras, dan budaya adalah sebuah anugerah. Keberagaman ini menjadi modal sosial yang tak ternilai harganya karena mendorong terciptanya toleransi, dialog, inovasi, dan kreativitas. Dengan saling mengenal dan menghargai, kita membangun jaringan kepercayaan yang memperkuat ketahanan nasional.</p>
                            
                        </div>
                         <div class="bg-white p-8 rounded-2xl shadow-lg">
                            <h4 class="text-2xl font-bold text-gray-800 mb-4">B. Gotong Royong: Jiwa Bangsa</h4>
                            <p class="text-gray-600 mb-4">Gotong royong adalah praktik asli budaya Indonesia yang menjadi inti dari Sila Kelima Pancasila. Ini adalah wujud kerja sama tanpa pamrih untuk mencapai tujuan bersama. Dalam konteks ekonomi, gotong royong terwujud dalam bentuk koperasi dan usaha bersama yang bertujuan untuk kesejahteraan bersama, bukan keuntungan individu semata.</p>
                             <ul class="list-disc list-inside space-y-2 text-gray-600">
                                 <li>Membangun fasilitas umum secara swadaya.</li>
                                 <li>Membantu tetangga yang sedang kesulitan.</li>
                                 <li>Kerja bakti membersihkan lingkungan.</li>
                                 <li>Musyawarah untuk mencapai mufakat.</li>
                             </ul>
                        </div>
                    </div>

                    <!-- Evaluasi Modul -->
                    <div class="max-w-3xl mx-auto bg-white border-t-4 border-emerald-500 p-6 shadow-lg mt-12 rounded-b-lg">
                        <h4 class="text-xl font-bold text-gray-800 mb-2">Evaluasi Modul 3</h4>
                        <p class="text-gray-600 mb-4">Berikan satu contoh nyata bagaimana keberagaman di sekolah atau lingkunganmu dapat menjadi kekuatan, bukan sumber perpecahan!</p>
                        <button class="gemini-btn bg-emerald-500 text-white font-semibold py-2 px-4 rounded-lg inline-flex items-center space-x-2 hover:bg-emerald-600 transition-colors" data-prompt="Carikan contoh berita atau studi kasus nyata terbaru di Indonesia di mana keberagaman budaya menjadi kekuatan untuk menyelesaikan masalah sosial.">
                            <span>✨ Cari Studi Kasus Terkini AI</span>
                        </button>
                        <div class="gemini-response-bhinneka mt-4"></div>
                    </div>
                </div>
            </section>
            
            <!-- Modul 4: NKRI -->
            <section id="nkri" class="py-16 md:py-24">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-12">
                         <h3 class="text-3xl font-bold text-gray-800">Pilar 4: Negara Kesatuan Republik Indonesia</h3>
                         <p class="text-gray-600 mt-2">Menjadi Warga Negara yang Baik.</p>
                    </div>

                    <!-- Pertanyaan Pemantik -->
                    <div class="max-w-3xl mx-auto bg-rose-100 border-l-4 border-rose-500 text-rose-800 p-6 rounded-r-lg shadow-md mb-12">
                        <h4 class="text-xl font-bold mb-2">Pertanyaan Pemantik</h4>
                        <p>Jika negara adalah sebuah rumah, dan kita adalah penghuninya, apa saja hak yang kita dapatkan dan kewajiban apa yang harus kita lakukan agar "rumah" kita tetap aman, nyaman, dan terawat?</p>
                    </div>
                    
                    <!-- Konten Materi NKRI -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
                        <div class="bg-white p-8 rounded-2xl shadow-lg">
                            <h4 class="text-2xl font-bold text-gray-800 mb-6">A. Hak dan Kewajiban Warga Negara</h4>
                            <p class="text-gray-600 mb-4">Keseimbangan antara hak dan kewajiban adalah kunci kehidupan bernegara yang sehat. Hak adalah sesuatu yang kita terima dari negara, sementara kewajiban adalah sesuatu yang harus kita berikan kepada negara.</p>
                            <div class="space-y-4">
                               <div class="bg-green-100 p-4 rounded-lg">
                                    <h5 class="font-semibold text-green-800">Contoh Hak:</h5>
                                    <p class="text-green-700">Mendapat pendidikan, layanan kesehatan, perlindungan hukum, dan kebebasan berpendapat.</p>
                                </div>
                                <div class="bg-blue-100 p-4 rounded-lg">
                                    <h5 class="font-semibold text-blue-800">Contoh Kewajiban:</h5>
                                    <p class="text-blue-700">Membayar pajak, menaati hukum, serta ikut serta dalam bela negara dan menjaga ketertiban.</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white p-8 rounded-2xl shadow-lg">
                             <h4 class="text-2xl font-bold text-gray-800 mb-6">B. Sistem Pemerintahan (Trias Politica)</h4>
                             <p class="text-gray-700 mb-4">Indonesia menganut sistem pembagian kekuasaan untuk menghindari pemusatan kekuasaan (<span class="italic">checks and balances</span>).</p>
                             <ul class="list-none space-y-3">
                                 <li><strong class="text-red-600">Eksekutif:</strong> Presiden, Wapres, & Menteri. <span class="text-gray-600">Tugas: Menjalankan UU.</span></li>
                                 <li><strong class="text-blue-600">Legislatif:</strong> DPR, DPD, & MPR. <span class="text-gray-600">Tugas: Membuat UU.</span></li>
                                 <li><strong class="text-yellow-600">Yudikatif:</strong> MA, MK, & KY. <span class="text-gray-600">Tugas: Mengawasi & Mengadili pelanggaran UU.</span></li>
                             </ul>
                        </div>
                    </div>
                    
                    <!-- Evaluasi Modul -->
                    <div class="max-w-3xl mx-auto bg-white border-t-4 border-rose-500 p-6 shadow-lg mt-12 rounded-b-lg">
                        <h4 class="text-xl font-bold text-gray-800 mb-2">Evaluasi Modul 4</h4>
                        <p class="text-gray-600 mb-4">Mengapa membayar pajak dianggap sebagai salah satu kewajiban paling penting bagi seorang warga negara? Hubungkan jawabanmu dengan hak yang kita terima dari negara!</p>
                        <button class="gemini-btn bg-rose-500 text-white font-semibold py-2 px-4 rounded-lg inline-flex items-center space-x-2 hover:bg-rose-600 transition-colors" data-prompt="Jelaskan dengan analogi sederhana hubungan timbal balik antara kewajiban membayar pajak dengan hak warga negara untuk mendapatkan fasilitas publik seperti jalan dan sekolah.">
                           <span>✨ Jelaskan dengan Analogi AI</span>
                        </button>
                        <div class="gemini-response-nkri mt-4"></div>
                    </div>
                </div>
            </section>
            
            <!-- Evaluasi Global -->
            <section id="evaluasi" class="py-16 md:py-24 bg-stone-50">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-12">
                         <h3 class="text-3xl font-bold text-gray-800">Evaluasi Global</h3>
                         <p class="text-gray-600 mt-2">Uji pemahamanmu terhadap keseluruhan materi.</p>
                    </div>

                    <div id="quiz-container" class="max-w-3xl mx-auto bg-white p-8 rounded-2xl shadow-lg">
                        <!-- Questions will be injected here by JavaScript -->
                    </div>
                    <div id="quiz-result" class="hidden max-w-3xl mx-auto mt-8 text-center bg-white p-8 rounded-2xl shadow-lg">
                        <h4 class="text-2xl font-bold text-gray-800 mb-4">Hasil Evaluasi</h4>
                        <p id="score-text" class="text-lg text-gray-700 mb-4"></p>
                        <p id="feedback-text" class="text-gray-600 mb-6"></p>
                        <button id="retry-quiz-btn" class="bg-orange-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-orange-600 transition-colors">Coba Lagi</button>
                    </div>
                </div>
            </section>
            
            <!-- Kesimpulan -->
            <section id="kesimpulan" class="py-16 md:py-24">
                 <div class="container mx-auto px-6 max-w-4xl">
                    <div class="text-center mb-12">
                         <h3 class="text-3xl font-bold text-gray-800">Kesimpulan Pembelajaran</h3>
                    </div>
                    <div class="bg-white p-8 rounded-2xl shadow-lg text-center">
                        <p id="conclusion-text" class="text-lg text-gray-700 leading-relaxed">
                            Keempat pilar kebangsaan—<b class="text-orange-600">Pancasila</b>, <b class="text-sky-600">UUD 1945</b>, <b class="text-emerald-600">Bhinneka Tunggal Ika</b>, dan <b class="text-rose-600">NKRI</b>—adalah satu kesatuan yang tidak terpisahkan. Pancasila adalah jiwa dan fondasinya, UUD 1945 adalah kerangka hukumnya, Bhinneka Tunggal Ika adalah modal sosialnya, dan NKRI adalah wujud negaranya. Memahami dan mengamalkan keempat pilar ini adalah kewajiban kita sebagai warga negara untuk menjaga keutuhan dan mewujudkan cita-cita luhur bangsa Indonesia.
                        </p>
                         <button id="tts-btn" class="mt-6 bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg inline-flex items-center space-x-2 hover:bg-gray-800 transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.858 15.858a5 5 0 017.072 0M2.022 12a9 9 0 0112.728 0"></path></svg>
                            <span>Dengarkan Kesimpulan</span>
                        </button>
                        <div id="audio-player-container" class="mt-4"></div>
                    </div>
                 </div>
            </section>
        </main>
        
        <footer class="bg-gray-800 text-white text-center py-6">
            <div class="container mx-auto px-6">
                <p>Copyright © 2025 <a href="https://www.putuardi.my.id" class="text-orange-400 hover:underline">Putu Ardi</a>.</p>
                <p class="text-sm text-gray-400">Dibuat untuk memberdayakan para pendidik.</p>
                <p class="text-sm text-gray-400">Aplikasi ini adalah interpretasi interaktif dari panduan Capaian Pembelajaran Pendidikan Pancasila.</p>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Gemini API Call Function ---
            const callGeminiAPI = async (prompt, systemInstruction = "You are a helpful assistant for a Pancasila education app.", useSearch = false) => {
                const apiKey = "AIzaSyAJTN1yEZ1iPl-o8vKlcSj6wIjgPORS5AQ"; // API key is handled by the environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{ parts: [{ text: prompt }] }],
                    systemInstruction: { parts: [{ text: systemInstruction }] },
                };
                
                if (useSearch) {
                    payload.tools = [{ "google_search": {} }];
                }

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    if (result.candidates && result.candidates[0].content.parts[0].text) {
                        return result.candidates[0].content.parts[0].text;
                    } else {
                        return "Tidak dapat mengambil respons dari AI saat ini.";
                    }
                } catch (error) {
                    console.error("Error calling Gemini API:", error);
                    return "Terjadi kesalahan saat menghubungi layanan AI. Silakan coba lagi nanti.";
                }
            };
            
            // --- Gemini TTS API Function ---
            const callGeminiTTS = async (textToSpeak) => {
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{ parts: [{ text: `Ucapkan dengan jelas dan tenang: ${textToSpeak}` }] }],
                    generationConfig: {
                        responseModalities: ["AUDIO"],
                        speechConfig: {
                            voiceConfig: { prebuiltVoiceConfig: { voiceName: "Sadaltager" } }
                        }
                    },
                    model: "gemini-2.5-flash-preview-tts"
                };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                     if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    const result = await response.json();
                    const audioData = result?.candidates?.[0]?.content?.parts?.[0]?.inlineData?.data;
                    return audioData;
                } catch (error) {
                    console.error("Error calling Gemini TTS API:", error);
                    return null;
                }
            };
            
            const base64ToArrayBuffer = (base64) => {
                const binaryString = window.atob(base64);
                const len = binaryString.length;
                const bytes = new Uint8Array(len);
                for (let i = 0; i < len; i++) {
                    bytes[i] = binaryString.charCodeAt(i);
                }
                return bytes.buffer;
            };

            const pcmToWav = (pcmData, sampleRate) => {
                const numChannels = 1;
                const bytesPerSample = 2; // 16-bit
                const blockAlign = numChannels * bytesPerSample;
                const byteRate = sampleRate * blockAlign;
                const dataSize = pcmData.length * bytesPerSample;
                const buffer = new ArrayBuffer(44 + dataSize);
                const view = new DataView(buffer);

                // RIFF header
                view.setUint32(0, 0x52494646, false); // "RIFF"
                view.setUint32(4, 36 + dataSize, true);
                view.setUint32(8, 0x57415645, false); // "WAVE"
                // "fmt " sub-chunk
                view.setUint32(12, 0x666d7420, false); // "fmt "
                view.setUint32(16, 16, true); // Sub-chunk size
                view.setUint16(20, 1, true); // Audio format (1 for PCM)
                view.setUint16(22, numChannels, true);
                view.setUint32(24, sampleRate, true);
                view.setUint32(28, byteRate, true);
                view.setUint16(32, blockAlign, true);
                view.setUint16(34, bytesPerSample * 8, true); // Bits per sample
                // "data" sub-chunk
                view.setUint32(36, 0x64617461, false); // "data"
                view.setUint32(40, dataSize, true);

                // Write the PCM data
                const pcm16 = new Int16Array(pcmData.buffer);
                 for (let i = 0; i < pcm16.length; i++) {
                    view.setInt16(44 + i * 2, pcm16[i], true);
                }
                
                return new Blob([view], { type: 'audio/wav' });
            };

            // --- Gemini Feature Handlers ---
            document.getElementById('gemini-pancasila-btn').addEventListener('click', async (e) => {
                const button = e.currentTarget;
                const responseContainer = document.getElementById('gemini-pancasila-response');
                button.disabled = true;
                responseContainer.innerHTML = '<div class="flex items-center justify-center"><div class="loader"></div><span class="ml-2 text-gray-600">AI sedang berpikir...</span></div>';
                
                const prompt = "Jelaskan dengan poin-poin sederhana perbedaan fundamental antara Pancasila sebagai dasar negara (filosofische grondslag) dan sebagai pandangan hidup bangsa (weltanschauung).";
                const systemInstruction = "Anda adalah seorang ahli Tata Negara yang mampu menjelaskan konsep kompleks secara sederhana untuk siswa SMA.";
                const response = await callGeminiAPI(prompt, systemInstruction);
                
                responseContainer.innerHTML = `<div class="gemini-response-container">${response.replace(/\n/g, '<br>')}</div>`;
                button.disabled = false;
            });

            document.querySelector('.gemini-btn[data-prompt*="Perda"]').addEventListener('click', async (e) => {
                const button = e.currentTarget;
                const responseContainer = document.querySelector('.gemini-response-uud1945');
                button.disabled = true;
                responseContainer.innerHTML = '<div class="flex items-center justify-center"><div class="loader"></div><span class="ml-2 text-gray-600">AI sedang mencari studi kasus...</span></div>';
                
                const prompt = button.dataset.prompt;
                const systemInstruction = "Anda adalah seorang analis kebijakan publik. Berikan contoh studi kasus yang nyata atau hipotetis namun realistis.";
                const response = await callGeminiAPI(prompt, systemInstruction);

                responseContainer.innerHTML = `<div class="gemini-response-container">${response.replace(/\n/g, '<br>')}</div>`;
                button.disabled = false;
            });
            
             document.querySelector('.gemini-btn[data-prompt*="keberagaman"]').addEventListener('click', async (e) => {
                const button = e.currentTarget;
                const responseContainer = document.querySelector('.gemini-response-bhinneka');
                button.disabled = true;
                responseContainer.innerHTML = '<div class="flex items-center justify-center"><div class="loader"></div><span class="ml-2 text-gray-600">AI sedang mencari berita...</span></div>';
                
                const prompt = button.dataset.prompt;
                const systemInstruction = "Anda adalah seorang jurnalis yang fokus pada isu sosial dan budaya di Indonesia.";
                const response = await callGeminiAPI(prompt, systemInstruction, true); // Use Google Search

                responseContainer.innerHTML = `<div class="gemini-response-container">${response.replace(/\n/g, '<br>')}</div>`;
                button.disabled = false;
            });
            
             document.querySelector('.gemini-btn[data-prompt*="pajak"]').addEventListener('click', async (e) => {
                const button = e.currentTarget;
                const responseContainer = document.querySelector('.gemini-response-nkri');
                button.disabled = true;
                responseContainer.innerHTML = '<div class="flex items-center justify-center"><div class="loader"></div><span class="ml-2 text-gray-600">AI sedang membuat analogi...</span></div>';
                
                const prompt = button.dataset.prompt;
                const systemInstruction = "Anda adalah seorang guru yang pandai membuat analogi dan perumpamaan sederhana.";
                const response = await callGeminiAPI(prompt, systemInstruction);

                responseContainer.innerHTML = `<div class="gemini-response-container">${response.replace(/\n/g, '<br>')}</div>`;
                button.disabled = false;
            });
            
            document.getElementById('tts-btn').addEventListener('click', async (e) => {
                const button = e.currentTarget;
                const audioContainer = document.getElementById('audio-player-container');
                button.disabled = true;
                button.innerHTML = `<div class="loader !w-6 !h-6 !border-white !border-b-transparent"></div><span class="ml-2">Memproses audio...</span>`;

                const text = document.getElementById('conclusion-text').innerText;
                const audioData = await callGeminiTTS(text);

                if(audioData) {
                    const sampleRate = 24000;
                    const pcmData = base64ToArrayBuffer(audioData);
                    const pcm16 = new Int16Array(pcmData);
                    const wavBlob = pcmToWav(pcm16, sampleRate);
                    const audioUrl = URL.createObjectURL(wavBlob);
                    
                    audioContainer.innerHTML = `<audio controls autoplay class="w-full"><source src="${audioUrl}" type="audio/wav">Browser Anda tidak mendukung elemen audio.</audio>`;
                } else {
                     audioContainer.innerHTML = `<p class="text-red-500">Gagal memuat audio. Silakan coba lagi.</p>`;
                }

                button.disabled = false;
                button.innerHTML = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.858 15.858a5 5 0 017.072 0M2.022 12a9 9 0 0112.728 0"></path></svg><span>Dengarkan Kesimpulan</span>`;
            });


            // --- Accordion Logic ---
            const accordionItems = document.querySelectorAll('.accordion-item');
            accordionItems.forEach(item => {
                const header = item.querySelector('.accordion-item-header');
                header.addEventListener('click', () => {
                    item.classList.toggle('active');
                });
            });

            // --- Tabs Logic ---
            const tabsContainer = document.getElementById('tabs-container-pancasila');
            const tabsContent = document.getElementById('tabs-content-pancasila');
            tabsContainer.addEventListener('click', (event) => {
                if (event.target.classList.contains('tab-button')) {
                    const targetTab = event.target.dataset.tab;
                    tabsContainer.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                    event.target.classList.add('active');
                    tabsContent.querySelectorAll('.tab-pane').forEach(pane => {
                        pane.style.display = pane.id === targetTab ? 'block' : 'none';
                    });
                }
            });
            // Default display for tabs
             document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.style.display = pane.classList.contains('active') ? 'block' : 'none';
            });


            // --- Nav Link Active on Scroll ---
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { rootMargin: '-50% 0px -50% 0px' });

            sections.forEach(section => {
                observer.observe(section);
            });

            // --- Global Evaluation Quiz Logic ---
            const quizData = [
                {
                    question: "Siapakah tokoh yang pertama kali memperkenalkan istilah 'Pancasila' dalam sidang BPUPKI?",
                    options: ["Moh. Yamin", "Dr. Soepomo", "Ir. Soekarno", "Moh. Hatta"],
                    answer: "Ir. Soekarno"
                },
                {
                    question: "Dalam hierarki perundang-undangan Indonesia, peraturan yang kedudukannya paling tinggi adalah...",
                    options: ["Undang-Undang (UU)", "Ketetapan MPR (TAP MPR)", "Peraturan Pemerintah (PP)", "UUD NRI Tahun 1945"],
                    answer: "UUD NRI Tahun 1945"
                },
                {
                    question: "Prinsip gotong royong sebagai perwujudan sistem ekonomi Pancasila paling erat kaitannya dengan sila ke-...",
                    options: ["Dua", "Tiga", "Empat", "Lima"],
                    answer: "Lima"
                },
                {
                    question: "Lembaga negara yang bertugas membuat undang-undang disebut lembaga...",
                    options: ["Eksekutif", "Yudikatif", "Legislatif", "Federatif"],
                    answer: "Legislatif"
                },
                {
                    question: "Kedudukan Pancasila sebagai sumber acuan dan landasan filosofis bagi pembentukan hukum di Indonesia disebut...",
                    options: ["Pandangan Hidup", "Ideologi Terbuka", "Sumber dari Segala Sumber Hukum", "Perjanjian Luhur"],
                    answer: "Sumber dari Segala Sumber Hukum"
                }
            ];

            const quizContainer = document.getElementById('quiz-container');
            const quizResult = document.getElementById('quiz-result');
            const scoreText = document.getElementById('score-text');
            const feedbackText = document.getElementById('feedback-text');
            const retryBtn = document.getElementById('retry-quiz-btn');

            let currentQuestionIndex = 0;
            let score = 0;
            let userAnswers = [];

            function loadQuiz() {
                quizContainer.innerHTML = ''; // Clear previous content
                quizResult.classList.add('hidden');
                quizContainer.classList.remove('hidden');
                currentQuestionIndex = 0;
                score = 0;
                userAnswers = [];

                showQuestion();
            }

            function showQuestion() {
                const currentQuestion = quizData[currentQuestionIndex];
                let optionsHTML = '';
                currentQuestion.options.forEach(option => {
                    optionsHTML += `<button class="quiz-option w-full text-left p-4 border-2 rounded-lg my-2 hover:bg-orange-100 transition-colors">${option}</button>`;
                });

                quizContainer.innerHTML = `
                    <div class="mb-6">
                        <p class="text-gray-600">Pertanyaan ${currentQuestionIndex + 1} dari ${quizData.length}</p>
                        <h4 class="text-xl font-bold text-gray-800 mt-2">${currentQuestion.question}</h4>
                    </div>
                    <div id="options-container">
                        ${optionsHTML}
                    </div>
                    <div class="flex justify-end mt-6">
                         <button id="next-btn" class="bg-gray-300 text-gray-600 font-semibold py-2 px-6 rounded-lg cursor-not-allowed" disabled>Selanjutnya</button>
                    </div>
                `;

                const optionsContainer = document.getElementById('options-container');
                optionsContainer.addEventListener('click', handleOptionSelect);
            }

            function handleOptionSelect(e) {
                if (e.target.classList.contains('quiz-option')) {
                    const selectedOption = e.target;
                    
                    document.querySelectorAll('.quiz-option').forEach(btn => btn.classList.remove('selected'));
                    selectedOption.classList.add('selected');

                    const nextBtn = document.getElementById('next-btn');
                    nextBtn.disabled = false;
                    nextBtn.classList.remove('bg-gray-300', 'text-gray-600', 'cursor-not-allowed');
                    nextBtn.classList.add('bg-orange-500', 'text-white', 'hover:bg-orange-600');
                    nextBtn.onclick = () => checkAnswer(selectedOption.textContent);
                }
            }

            function checkAnswer(selectedAnswer) {
                userAnswers[currentQuestionIndex] = selectedAnswer;
                const correct = selectedAnswer === quizData[currentQuestionIndex].answer;
                
                if (correct) {
                    score++;
                }
                
                const options = document.querySelectorAll('.quiz-option');
                options.forEach(option => {
                    option.disabled = true;
                    if(option.textContent === quizData[currentQuestionIndex].answer) {
                        option.classList.add('correct');
                    } else if (option.textContent === selectedAnswer) {
                         option.classList.add('incorrect');
                    }
                });

                const nextBtn = document.getElementById('next-btn');
                nextBtn.textContent = (currentQuestionIndex < quizData.length - 1) ? 'Selanjutnya' : 'Lihat Hasil';
                nextBtn.onclick = () => {
                    currentQuestionIndex++;
                    if (currentQuestionIndex < quizData.length) {
                        showQuestion();
                    } else {
                        showResults();
                    }
                };
            }

            function showResults() {
                quizContainer.classList.add('hidden');
                quizResult.classList.remove('hidden');

                const finalScore = (score / quizData.length) * 100;
                scoreText.textContent = `Skor Anda: ${finalScore.toFixed(0)}`;

                let feedback = '';
                if (finalScore >= 80) {
                    feedback = 'Luar biasa! Pemahamanmu sangat baik.';
                } else if (finalScore >= 60) {
                    feedback = 'Bagus! Kamu sudah memahami sebagian besar materi.';
                } else {
                    feedback = 'Terus belajar! Coba ulangi materi untuk pemahaman yang lebih baik.';
                }
                feedbackText.textContent = feedback;
            }

            retryBtn.addEventListener('click', loadQuiz);

            loadQuiz();
        });
    </script>
</body>
</html>

